<template>
    <h3 class="text-center my-4">
        <span class="rarity-text">${filteredAffixes.length}</span> Magic Affixes Found
    </h3>

    <search-area>

        <div class="max-w-11/12 m-auto px-4">
            <div class="flex flex-wrap justify-center items-start">

                <div class="w-full lg:w-auto lg:min-w-70 px-2">
                    <div class="relative mb-2">
                        <select id="ptype" class="select-base peer" value.bind="selectedPType" required>
                            <option repeat.for="opt of pTypeOptions" value.bind="opt.value"> ${opt.label}</option>
                        </select>
                        <label for="ptype" class="floating-label">Prefix/Suffix</label>
                    </div>
                </div>

                <div class="w-full lg:w-auto lg:min-w-70 px-2">
                    <div class="relative mb-2">
                        <select id="desc" class="select-base peer" value.bind="selectedGroupDescription" required>
                            <option repeat.for="opt of groupOptions" value.bind="opt.value"> ${opt.label}</option>
                        </select>
                        <label for="desc" class="floating-label">
                            Property Type</label>
                    </div>
                </div>

                <div class="w-full lg:w-auto lg:min-w-70 px-2">
                    <div class="relative">
                        <select id="itype" class="select-base peer" value.bind="selectedType" required>
                            <option repeat.for="opt of types"
                                    value.bind="opt.value && opt.value.length ? opt.value[0] : ''">${opt.label}
                            </option>
                        </select>
                        <label for="itype" class="floating-label">Item Type</label>
                    </div>
                    <div class="flex my-2">
                        <input id="exacttype" type="checkbox" class="check-base" checked.bind="exclusiveType">
                        <label for="exacttype" class="block type-text ml-1">Exact Type Only </label>
                    </div>
                </div>

                <div class="w-full lg:w-auto lg:min-w-70 px-2">
                    <div class="relative mb-2">
                        <input id="tokensearch"
                               class="select-base peer" type="text" value.bind="search" required/> <label
                            for="tokensearch" class="floating-label">Filter by Input</label>
                    </div>
                </div>

                <div class="w-full lg:w-auto lg:min-w-70 px-2 flex flex-nowrap">
                    <div class="w-full relative mb-2 mr-2">
                        <select id="minrlvl" class="select-base peer" value.bind="minRequiredLevel" required>
                            <option repeat.for="opt of rLevelOptions" value.bind="opt.value">${opt.label}</option>
                        </select>
                        <label for="minrlvl" class="floating-label">Min rLvl</label>
                    </div>
                    <div class="w-full relative mb-2 ml-2">
                        <select id="maxrlvl" class="select-base peer" value.bind="maxRequiredLevel" required>
                            <option repeat.for="opt of rLevelOptions" value.bind="opt.value">${opt.label}</option>
                        </select>
                        <label for="maxrlvl" class="floating-label">Max rLvl</label>
                    </div>
                </div>

                <div class="w-full lg:w-auto lg:min-w-35 px-2">
                    <div class="mb-2">
                        <button id="filterreset" class="button-base" type="button" click.trigger="resetFilters()">
                            Reset Filters
                        </button>
                    </div>
                </div>

            </div>
        </div>

    </search-area>

    <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-2 px-2 text-center mt-5">
        <div class="bg-gray-800 border border-gray-600 rounded shadow p-2" repeat.for="affix of filteredAffixes">
            <div class="flex justify-between items-center">
                <div class="prop-text mt-1 ml-1">${affix.Name}</div>
                <div class="type-text mt-1 mr-1">${affix.PType}</div>
            </div>
            <div class="requirement-text mb-1">Level ${affix.RequiredLevel > 0 ? affix.RequiredLevel : 1} Required
            </div>
            <div class="type-text mb-1" if.bind="affix.Level">Affix Level ${affix.Level}${affix.MaxLevel ? ' - ' +
                affix.MaxLevel : ''}
            </div>
            <div class="flex flex-wrap justify-center" if.bind="affix.Types && affix.Types.length">
                <span class="set-text mx-1" repeat.for="t of affix.Types">${t}</span>
            </div>
            <div class="flex flex-wrap justify-center" if.bind="affix.ETypes && affix.ETypes.length">
                <span class="requirement-text mx-1" repeat.for="et of affix.ETypes">${et}</span>
            </div>
            <div class="prop-text my-1" repeat.for="prop of affix.Properties">${prop.PropertyString}</div>
        </div>
    </div>
</template>
