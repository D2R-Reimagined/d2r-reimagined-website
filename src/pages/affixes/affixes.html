<template>
    <h3 class="text-center my-4">
        <span class="rarity-text">${filteredAffixes.length}</span> Magic Affixes Found
    </h3>

    <search-area>

        <div class="max-w-11/12 mx-auto px-4">
            <div class="flex flex-wrap justify-center items-start text-center">

                <div class="w-auto min-w-50 px-2">
                    <div class="relative mb-2">
                        <select id="ptype"
                                class="select-base peer"
                                value.bind="selectedPType" required>
                            <option repeat.for="opt of pTypeOptions" value.bind="opt.value">${opt.label}</option>
                        </select>
                        <label for="ptype" class="floating-label">Prefix/Suffix</label>
                    </div>
                </div>

                <div class="w-auto min-w-50 px-2">
                    <div class="relative mb-2">
                        <select id="desc"
                                class="select-base peer"
                                value.bind="selectedGroupDescription" required>
                            <option repeat.for="opt of groupOptions" value.bind="opt.value">${opt.label}</option>
                        </select>
                        <label for="desc" class="floating-label">Property Type</label>
                    </div>
                </div>
                <div class="w-auto min-w-50 px-2">
                    <div class="relative">
                        <select id="itype"
                                class="select-base peer"
                                value.bind="selectedType" required>
                            <option repeat.for="opt of types"
                                    value.bind="opt.value && opt.value.length ? opt.value[0] : ''">${opt.label}
                            </option>
                        </select>
                        <label for="itype" class="floating-label">Item Type</label>
                    </div>
                    <label for="exacttype" class="block my-2 type-text">
                        <input id="exacttype" type="checkbox" class="mr-2" checked.bind="exclusiveType">Exact Type Only
                    </label>
                </div>
                <div class="w-auto min-w-50 px-2">
                    <div class="relative mb-2">
                        <input id="tokensearch"
                               class="peer w-full bg-gray-800 border-1 border-gray-600 ring-0 focus:ring-0 focus:border-gray-400 rounded-lg type-text z-0"
                               type="text" value.bind="search" required/>
                        <label for="tokensearch" class="floating-label">Filter by Input</label>
                    </div>
                </div>
                <div class="w-auto px-2 flex flex-nowrap">
                    <div class="min-w-32 relative mr-2">
                        <select id="minrlvl" class="select-base peer" value.bind="minRequiredLevel" required>
                            <option repeat.for="opt of rLevelOptions" value.bind="opt.value">${opt.label}</option>
                        </select>
                        <label for="minrlvl" class="floating-label">Min rLvl</label>
                    </div>
                    <div class="min-w-32 relative ml-2">
                        <select id="maxrlvl" class="select-base peer" value.bind="maxRequiredLevel" required>
                            <option repeat.for="opt of rLevelOptions" value.bind="opt.value">${opt.label}</option>
                        </select>
                        <label for="maxrlvl" class="floating-label">Max rLvl</label>
                    </div>
                    <div class="w-auto min-w-38 px-2">
                        <div class="mb-2">
                            <button id="filterreset"
                                    class="w-full h-10.5 bg-red-900 hover:bg-red-600 border border-gray-600 hover:border-gray-400 type-text rounded-lg p-2"
                                    type="button" click.trigger="resetFilters()">Reset Filters
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </search-area>

    <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-2 px-2 text-center mt-5">
        <div class="bg-gray-800 rounded shadow p-2" repeat.for="affix of filteredAffixes">
            <div class="flex justify-between items-center">
                <div class="prop-text mt-1 ml-1">${affix.Name}</div>
                <div class="type-text mt-1 mr-1">${affix.PType}</div>
            </div>
            <div class="requirement-text mb-1">Level ${affix.RequiredLevel > 0 ? affix.RequiredLevel : 1} Required
            </div>
            <div class="type-text mb-1" if.bind="affix.Level">Affix Level ${affix.Level}${affix.MaxLevel ? ' - ' +
                affix.MaxLevel : ''}
            </div>
            <div class="flex flex-wrap justify-center" if.bind="affix.Types && affix.Types.length">
                <span class="set-text mx-1" repeat.for="t of affix.Types">${t}</span>
            </div>
            <div class="flex flex-wrap justify-center" if.bind="affix.ETypes && affix.ETypes.length">
                <span class="requirement-text mx-1" repeat.for="et of affix.ETypes">${et}</span>
            </div>
            <div class="prop-text my-1" repeat.for="prop of affix.Properties">${prop.PropertyString}</div>
        </div>
    </div>
</template>
